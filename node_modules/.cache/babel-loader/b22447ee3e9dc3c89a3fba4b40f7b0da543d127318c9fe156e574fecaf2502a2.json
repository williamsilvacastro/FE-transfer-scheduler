{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/willi/OneDrive/Documentos/GitHub/FE-transfer-scheduler/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/willi/OneDrive/Documentos/GitHub/FE-transfer-scheduler/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.date.to-iso-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport { ref, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'AgendamentoTransferencia',\n  setup: function setup() {\n    var store = useStore();\n    var router = useRouter();\n    var errors = ref({});\n    var form = ref({\n      contaDestino: '',\n      valor: '',\n      dataTransferencia: ''\n    });\n    var minDateTime = computed(function () {\n      var now = new Date();\n      return now.toISOString().slice(0, 16);\n    });\n    var calcularTaxa = function calcularTaxa(valor, dataTransferencia) {\n      var hoje = new Date();\n      var dataTransferenciaObj = new Date(dataTransferencia);\n      var diffDias = Math.floor((dataTransferenciaObj - hoje) / (1000 * 60 * 60 * 24));\n      if (diffDias === 0) {\n        return 12 + valor * 0.025;\n      } else if (diffDias >= 1 && diffDias <= 10) {\n        return 12;\n      } else if (diffDias >= 11 && diffDias <= 20) {\n        return valor * 0.082;\n      } else if (diffDias >= 21 && diffDias <= 30) {\n        return valor * 0.069;\n      } else if (diffDias >= 31 && diffDias <= 40) {\n        return valor * 0.047;\n      } else if (diffDias >= 41 && diffDias <= 50) {\n        return valor * 0.017;\n      }\n      return null;\n    };\n    var taxaCalculada = computed(function () {\n      if (!form.value.valor || !form.value.dataTransferencia) return null;\n      return calcularTaxa(Number(form.value.valor), form.value.dataTransferencia);\n    });\n    var validarFormulario = function validarFormulario() {\n      errors.value = {};\n      if (form.value.contaDestino.length !== 10) {\n        errors.value.contaDestino = 'A conta de destino deve ter 10 dígitos';\n      }\n      if (form.value.contaDestino === store.state.auth.contaOrigem) {\n        errors.value.contaDestino = 'A conta de destino não pode ser igual à sua conta';\n      }\n      if (form.value.valor <= 0) {\n        errors.value.valor = 'O valor deve ser maior que zero';\n      }\n      if (!form.value.dataTransferencia) {\n        errors.value.dataTransferencia = 'A data e hora de transferência são obrigatórias';\n      } else if (new Date(form.value.dataTransferencia) < new Date()) {\n        errors.value.dataTransferencia = 'A data e hora de transferência não podem ser no passado';\n      }\n      return Object.keys(errors.value).length === 0;\n    };\n    var handleSubmit = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var agendamento, _error$response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (validarFormulario()) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              _context.prev = 2;\n              agendamento = {\n                contaDestino: form.value.contaDestino,\n                valor: Number(form.value.valor),\n                dataTransferencia: form.value.dataTransferencia\n              };\n              _context.next = 6;\n              return store.dispatch('criarAgendamento', agendamento);\n            case 6:\n              alert('Transferência agendada com sucesso!');\n              router.push('/agendamentos');\n              _context.next = 13;\n              break;\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](2);\n              if ((_error$response = _context.t0.response) !== null && _error$response !== void 0 && (_error$response = _error$response.data) !== null && _error$response !== void 0 && _error$response.message) {\n                alert(\"Erro: \".concat(_context.t0.response.data.message));\n              } else {\n                alert('Erro ao agendar transferência');\n              }\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[2, 10]]);\n      }));\n      return function handleSubmit() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var limparFormulario = function limparFormulario() {\n      form.value = {\n        contaDestino: '',\n        valor: '',\n        dataTransferencia: ''\n      };\n      errors.value = {};\n    };\n    return {\n      form: form,\n      errors: errors,\n      minDateTime: minDateTime,\n      taxaCalculada: taxaCalculada,\n      handleSubmit: handleSubmit,\n      limparFormulario: limparFormulario\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","useStore","useRouter","name","setup","store","router","errors","form","contaDestino","valor","dataTransferencia","minDateTime","now","Date","toISOString","slice","calcularTaxa","hoje","dataTransferenciaObj","diffDias","Math","floor","taxaCalculada","value","Number","validarFormulario","length","state","auth","contaOrigem","Object","keys","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","agendamento","_error$response","wrap","_callee$","_context","prev","next","abrupt","dispatch","alert","push","t0","response","data","message","concat","stop","apply","arguments","limparFormulario"],"sources":["C:\\Users\\willi\\OneDrive\\Documentos\\GitHub\\FE-transfer-scheduler\\src\\views\\AgendamentoTransferencia.vue"],"sourcesContent":["<template>\n  <div class=\"agendamento\">\n    <h2>Novo Agendamento de Transferência</h2>\n    <form @submit.prevent=\"handleSubmit\">\n      <div class=\"form-group\">\n        <label for=\"contaDestino\">Conta de Destino:</label>\n        <input\n          type=\"text\"\n          id=\"contaDestino\"\n          v-model=\"form.contaDestino\"\n          required\n          pattern=\"[0-9]{10}\"\n          class=\"form-control\"\n          :class=\"{ 'error': errors.contaDestino }\"\n        >\n        <span class=\"error-message\" v-if=\"errors.contaDestino\">{{ errors.contaDestino }}</span>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"valor\">Valor da Transferência:</label>\n        <input\n          type=\"number\"\n          id=\"valor\"\n          v-model=\"form.valor\"\n          required\n          min=\"0.01\"\n          step=\"0.01\"\n          class=\"form-control\"\n          :class=\"{ 'error': errors.valor }\"\n        >\n        <span class=\"error-message\" v-if=\"errors.valor\">{{ errors.valor }}</span>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"dataTransferencia\">Data e Hora da Transferência:</label>\n        <input\n          type=\"datetime-local\"\n          id=\"dataTransferencia\"\n          v-model=\"form.dataTransferencia\"\n          required\n          :min=\"minDateTime\"\n          class=\"form-control\"\n          :class=\"{ 'error': errors.dataTransferencia }\"\n        >\n        <span class=\"error-message\" v-if=\"errors.dataTransferencia\">{{ errors.dataTransferencia }}</span>\n      </div>\n\n      <div v-if=\"taxaCalculada\" class=\"info-box\">\n        <p>Taxa Estimada: R$ {{ taxaCalculada.toFixed(2) }}</p>\n      </div>\n\n      <div class=\"button-group\">\n        <button type=\"submit\" class=\"btn-primary\">Agendar</button>\n        <button type=\"button\" @click=\"limparFormulario\" class=\"btn-secondary\">Limpar</button>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { ref, computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n\nexport default {\n  name: 'AgendamentoTransferencia',\n  setup() {\n    const store = useStore()\n    const router = useRouter()\n    const errors = ref({})\n\n    const form = ref({\n      contaDestino: '',\n      valor: '',\n      dataTransferencia: ''\n    })\n\n    const minDateTime = computed(() => {\n      const now = new Date()\n      return now.toISOString().slice(0, 16)\n    })\n\n    const calcularTaxa = (valor, dataTransferencia) => {\n      const hoje = new Date()\n      const dataTransferenciaObj = new Date(dataTransferencia)\n      const diffDias = Math.floor((dataTransferenciaObj - hoje) / (1000 * 60 * 60 * 24))\n\n      if (diffDias === 0) {\n        return 12 + (valor * 0.025)\n      } else if (diffDias >= 1 && diffDias <= 10) {\n        return 12\n      } else if (diffDias >= 11 && diffDias <= 20) {\n        return valor * 0.082\n      } else if (diffDias >= 21 && diffDias <= 30) {\n        return valor * 0.069\n      } else if (diffDias >= 31 && diffDias <= 40) {\n        return valor * 0.047\n      } else if (diffDias >= 41 && diffDias <= 50) {\n        return valor * 0.017\n      }\n      return null\n    }\n\n    const taxaCalculada = computed(() => {\n      if (!form.value.valor || !form.value.dataTransferencia) return null\n      return calcularTaxa(Number(form.value.valor), form.value.dataTransferencia)\n    })\n\n    const validarFormulario = () => {\n      errors.value = {}\n\n      if (form.value.contaDestino.length !== 10) {\n        errors.value.contaDestino = 'A conta de destino deve ter 10 dígitos'\n      }\n\n      if (form.value.contaDestino === store.state.auth.contaOrigem) {\n        errors.value.contaDestino = 'A conta de destino não pode ser igual à sua conta'\n      }\n\n      if (form.value.valor <= 0) {\n        errors.value.valor = 'O valor deve ser maior que zero'\n      }\n\n      if (!form.value.dataTransferencia) {\n        errors.value.dataTransferencia = 'A data e hora de transferência são obrigatórias'\n      } else if (new Date(form.value.dataTransferencia) < new Date()) {\n        errors.value.dataTransferencia = 'A data e hora de transferência não podem ser no passado'\n      }\n\n      return Object.keys(errors.value).length === 0\n    }\n\n    const handleSubmit = async () => {\n      if (!validarFormulario()) return\n\n      try {\n        const agendamento = {\n          contaDestino: form.value.contaDestino,\n          valor: Number(form.value.valor),\n          dataTransferencia: form.value.dataTransferencia\n        }\n\n        await store.dispatch('criarAgendamento', agendamento)\n        alert('Transferência agendada com sucesso!')\n        router.push('/agendamentos')\n      } catch (error) {\n        if (error.response?.data?.message) {\n          alert(`Erro: ${error.response.data.message}`)\n        } else {\n          alert('Erro ao agendar transferência')\n        }\n      }\n    }\n\n    const limparFormulario = () => {\n      form.value = {\n        contaDestino: '',\n        valor: '',\n        dataTransferencia: ''\n      }\n      errors.value = {}\n    }\n\n    return {\n      form,\n      errors,\n      minDateTime,\n      taxaCalculada,\n      handleSubmit,\n      limparFormulario\n    }\n  }\n}\n</script>\n\n<style scoped>\n.agendamento {\n  max-width: 600px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.form-group {\n  margin-bottom: 15px;\n  text-align: left;\n}\n\nlabel {\n  display: block;\n  margin-bottom: 5px;\n}\n\n.form-control {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n}\n\n.form-control.error {\n  border-color: #ff4444;\n}\n\n.error-message {\n  color: #ff4444;\n  font-size: 0.9em;\n  margin-top: 5px;\n  display: block;\n}\n\n.button-group {\n  display: flex;\n  gap: 10px;\n  margin-top: 20px;\n}\n\n.btn-primary, .btn-secondary {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  flex: 1;\n}\n\n.btn-primary {\n  background-color: #42b983;\n  color: white;\n}\n\n.btn-secondary {\n  background-color: #666;\n  color: white;\n}\n\n.btn-primary:hover {\n  background-color: #3aa876;\n}\n\n.btn-secondary:hover {\n  background-color: #555;\n}\n\n.info-box {\n  background-color: #f8f9fa;\n  padding: 15px;\n  border-radius: 4px;\n  margin: 20px 0;\n  text-align: left;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}