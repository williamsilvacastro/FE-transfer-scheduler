{"ast":null,"code":"import { ref, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'AgendamentoTransferencia',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const errors = ref({});\n    const form = ref({\n      contaOrigem: '',\n      contaDestino: '',\n      valor: '',\n      dataTransferencia: ''\n    });\n    const minDate = computed(() => {\n      const today = new Date();\n      return today.toISOString().split('T')[0];\n    });\n    const calcularTaxa = (valor, dataTransferencia) => {\n      const hoje = new Date();\n      const dataTransferenciaObj = new Date(dataTransferencia);\n      const diffDias = Math.floor((dataTransferenciaObj - hoje) / (1000 * 60 * 60 * 24));\n      if (diffDias === 0) {\n        return 12 + valor * 0.025;\n      } else if (diffDias >= 1 && diffDias <= 10) {\n        return 12;\n      } else if (diffDias >= 11 && diffDias <= 20) {\n        return valor * 0.082;\n      } else if (diffDias >= 21 && diffDias <= 30) {\n        return valor * 0.069;\n      } else if (diffDias >= 31 && diffDias <= 40) {\n        return valor * 0.047;\n      } else if (diffDias >= 41 && diffDias <= 50) {\n        return valor * 0.017;\n      }\n      return null;\n    };\n    const taxaCalculada = computed(() => {\n      if (!form.value.valor || !form.value.dataTransferencia) return null;\n      return calcularTaxa(Number(form.value.valor), form.value.dataTransferencia);\n    });\n    const validarFormulario = () => {\n      errors.value = {};\n      if (form.value.contaOrigem.length !== 10) {\n        errors.value.contaOrigem = 'A conta de origem deve ter 10 dígitos';\n      }\n      if (form.value.contaDestino.length !== 10) {\n        errors.value.contaDestino = 'A conta de destino deve ter 10 dígitos';\n      }\n      if (form.value.contaOrigem === form.value.contaDestino) {\n        errors.value.contaDestino = 'A conta de destino não pode ser igual à conta de origem';\n      }\n      if (form.value.valor <= 0) {\n        errors.value.valor = 'O valor deve ser maior que zero';\n      }\n      if (!form.value.dataTransferencia) {\n        errors.value.dataTransferencia = 'A data de transferência é obrigatória';\n      } else if (new Date(form.value.dataTransferencia) < new Date()) {\n        errors.value.dataTransferencia = 'A data de transferência não pode ser no passado';\n      }\n      return Object.keys(errors.value).length === 0;\n    };\n    const handleSubmit = async () => {\n      if (!validarFormulario()) return;\n      try {\n        const agendamento = {\n          contaOrigem: form.value.contaOrigem,\n          contaDestino: form.value.contaDestino,\n          valor: Number(form.value.valor),\n          dataTransferencia: form.value.dataTransferencia\n        };\n        await store.dispatch('criarAgendamento', agendamento);\n        alert('Transferência agendada com sucesso!');\n        router.push('/agendamentos');\n      } catch (error) {\n        if (error.response?.data?.message) {\n          alert(`Erro: ${error.response.data.message}`);\n        } else {\n          alert('Erro ao agendar transferência');\n        }\n      }\n    };\n    const limparFormulario = () => {\n      form.value = {\n        contaOrigem: '',\n        contaDestino: '',\n        valor: '',\n        dataTransferencia: ''\n      };\n      errors.value = {};\n    };\n    return {\n      form,\n      errors,\n      minDate,\n      taxaCalculada,\n      handleSubmit,\n      limparFormulario\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","useStore","useRouter","name","setup","store","router","errors","form","contaOrigem","contaDestino","valor","dataTransferencia","minDate","today","Date","toISOString","split","calcularTaxa","hoje","dataTransferenciaObj","diffDias","Math","floor","taxaCalculada","value","Number","validarFormulario","length","Object","keys","handleSubmit","agendamento","dispatch","alert","push","error","response","data","message","limparFormulario"],"sources":["C:\\Users\\willi\\OneDrive\\Documentos\\GitHub\\FE-transfer-scheduler\\src\\views\\AgendamentoTransferencia.vue"],"sourcesContent":["<template>\r\n  <div class=\"agendamento\">\r\n    <h2>Novo Agendamento de Transferência</h2>\r\n    <form @submit.prevent=\"handleSubmit\">\r\n      <div class=\"form-group\">\r\n        <label for=\"contaOrigem\">Conta de Origem:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"contaOrigem\"\r\n          v-model=\"form.contaOrigem\"\r\n          required\r\n          pattern=\"[0-9]{10}\"\r\n          class=\"form-control\"\r\n          :class=\"{ 'error': errors.contaOrigem }\"\r\n        >\r\n        <span class=\"error-message\" v-if=\"errors.contaOrigem\">{{ errors.contaOrigem }}</span>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"contaDestino\">Conta de Destino:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"contaDestino\"\r\n          v-model=\"form.contaDestino\"\r\n          required\r\n          pattern=\"[0-9]{10}\"\r\n          class=\"form-control\"\r\n          :class=\"{ 'error': errors.contaDestino }\"\r\n        >\r\n        <span class=\"error-message\" v-if=\"errors.contaDestino\">{{ errors.contaDestino }}</span>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"valor\">Valor da Transferência:</label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"valor\"\r\n          v-model=\"form.valor\"\r\n          required\r\n          min=\"0.01\"\r\n          step=\"0.01\"\r\n          class=\"form-control\"\r\n          :class=\"{ 'error': errors.valor }\"\r\n        >\r\n        <span class=\"error-message\" v-if=\"errors.valor\">{{ errors.valor }}</span>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"dataTransferencia\">Data da Transferência:</label>\r\n        <input\r\n          type=\"date\"\r\n          id=\"dataTransferencia\"\r\n          v-model=\"form.dataTransferencia\"\r\n          required\r\n          :min=\"minDate\"\r\n          class=\"form-control\"\r\n          :class=\"{ 'error': errors.dataTransferencia }\"\r\n        >\r\n        <span class=\"error-message\" v-if=\"errors.dataTransferencia\">{{ errors.dataTransferencia }}</span>\r\n      </div>\r\n\r\n      <div v-if=\"taxaCalculada\" class=\"info-box\">\r\n        <p>Taxa Estimada: R$ {{ taxaCalculada.toFixed(2) }}</p>\r\n      </div>\r\n\r\n      <div class=\"button-group\">\r\n        <button type=\"submit\" class=\"btn-primary\">Agendar</button>\r\n        <button type=\"button\" @click=\"limparFormulario\" class=\"btn-secondary\">Limpar</button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'AgendamentoTransferencia',\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const errors = ref({})\r\n\r\n    const form = ref({\r\n      contaOrigem: '',\r\n      contaDestino: '',\r\n      valor: '',\r\n      dataTransferencia: ''\r\n    })\r\n\r\n    const minDate = computed(() => {\r\n      const today = new Date()\r\n      return today.toISOString().split('T')[0]\r\n    })\r\n\r\n    const calcularTaxa = (valor, dataTransferencia) => {\r\n      const hoje = new Date()\r\n      const dataTransferenciaObj = new Date(dataTransferencia)\r\n      const diffDias = Math.floor((dataTransferenciaObj - hoje) / (1000 * 60 * 60 * 24))\r\n\r\n      if (diffDias === 0) {\r\n        return 12 + (valor * 0.025)\r\n      } else if (diffDias >= 1 && diffDias <= 10) {\r\n        return 12\r\n      } else if (diffDias >= 11 && diffDias <= 20) {\r\n        return valor * 0.082\r\n      } else if (diffDias >= 21 && diffDias <= 30) {\r\n        return valor * 0.069\r\n      } else if (diffDias >= 31 && diffDias <= 40) {\r\n        return valor * 0.047\r\n      } else if (diffDias >= 41 && diffDias <= 50) {\r\n        return valor * 0.017\r\n      }\r\n      return null\r\n    }\r\n\r\n    const taxaCalculada = computed(() => {\r\n      if (!form.value.valor || !form.value.dataTransferencia) return null\r\n      return calcularTaxa(Number(form.value.valor), form.value.dataTransferencia)\r\n    })\r\n\r\n    const validarFormulario = () => {\r\n      errors.value = {}\r\n\r\n      if (form.value.contaOrigem.length !== 10) {\r\n        errors.value.contaOrigem = 'A conta de origem deve ter 10 dígitos'\r\n      }\r\n\r\n      if (form.value.contaDestino.length !== 10) {\r\n        errors.value.contaDestino = 'A conta de destino deve ter 10 dígitos'\r\n      }\r\n\r\n      if (form.value.contaOrigem === form.value.contaDestino) {\r\n        errors.value.contaDestino = 'A conta de destino não pode ser igual à conta de origem'\r\n      }\r\n\r\n      if (form.value.valor <= 0) {\r\n        errors.value.valor = 'O valor deve ser maior que zero'\r\n      }\r\n\r\n      if (!form.value.dataTransferencia) {\r\n        errors.value.dataTransferencia = 'A data de transferência é obrigatória'\r\n      } else if (new Date(form.value.dataTransferencia) < new Date()) {\r\n        errors.value.dataTransferencia = 'A data de transferência não pode ser no passado'\r\n      }\r\n\r\n      return Object.keys(errors.value).length === 0\r\n    }\r\n\r\n    const handleSubmit = async () => {\r\n      if (!validarFormulario()) return\r\n\r\n      try {\r\n        const agendamento = {\r\n          contaOrigem: form.value.contaOrigem,\r\n          contaDestino: form.value.contaDestino,\r\n          valor: Number(form.value.valor),\r\n          dataTransferencia: form.value.dataTransferencia\r\n        }\r\n\r\n        await store.dispatch('criarAgendamento', agendamento)\r\n        alert('Transferência agendada com sucesso!')\r\n        router.push('/agendamentos')\r\n      } catch (error) {\r\n        if (error.response?.data?.message) {\r\n          alert(`Erro: ${error.response.data.message}`)\r\n        } else {\r\n          alert('Erro ao agendar transferência')\r\n        }\r\n      }\r\n    }\r\n\r\n    const limparFormulario = () => {\r\n      form.value = {\r\n        contaOrigem: '',\r\n        contaDestino: '',\r\n        valor: '',\r\n        dataTransferencia: ''\r\n      }\r\n      errors.value = {}\r\n    }\r\n\r\n    return {\r\n      form,\r\n      errors,\r\n      minDate,\r\n      taxaCalculada,\r\n      handleSubmit,\r\n      limparFormulario\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.agendamento {\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 15px;\r\n  text-align: left;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.form-control {\r\n  width: 100%;\r\n  padding: 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n}\r\n\r\n.form-control.error {\r\n  border-color: #ff4444;\r\n}\r\n\r\n.error-message {\r\n  color: #ff4444;\r\n  font-size: 0.9em;\r\n  margin-top: 5px;\r\n  display: block;\r\n}\r\n\r\n.button-group {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.btn-primary, .btn-secondary {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  flex: 1;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: #42b983;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: #666;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background-color: #3aa876;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: #555;\r\n}\r\n\r\n.info-box {\r\n  background-color: #f8f9fa;\r\n  padding: 15px;\r\n  border-radius: 4px;\r\n  margin: 20px 0;\r\n  text-align: left;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}