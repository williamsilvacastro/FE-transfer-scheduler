{"ast":null,"code":"import \"core-js/modules/es.number.to-fixed.js\";\nimport { createElementVNode as _createElementVNode, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"agendamento\"\n};\nvar _hoisted_2 = {\n  \"class\": \"form-group\"\n};\nvar _hoisted_3 = {\n  key: 0,\n  \"class\": \"error-message\"\n};\nvar _hoisted_4 = {\n  \"class\": \"form-group\"\n};\nvar _hoisted_5 = {\n  key: 0,\n  \"class\": \"error-message\"\n};\nvar _hoisted_6 = {\n  \"class\": \"form-group\"\n};\nvar _hoisted_7 = {\n  key: 0,\n  \"class\": \"error-message\"\n};\nvar _hoisted_8 = {\n  \"class\": \"form-group\"\n};\nvar _hoisted_9 = [\"min\"];\nvar _hoisted_10 = {\n  key: 0,\n  \"class\": \"error-message\"\n};\nvar _hoisted_11 = {\n  key: 0,\n  \"class\": \"info-box\"\n};\nvar _hoisted_12 = {\n  \"class\": \"button-group\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[11] || (_cache[11] = _createElementVNode(\"h2\", null, \"Novo Agendamento de Transferência\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[5] || (_cache[5] = _withModifiers(function () {\n      return $setup.handleSubmit && $setup.handleSubmit.apply($setup, arguments);\n    }, [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_2, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    \"for\": \"contaOrigem\"\n  }, \"Conta de Origem:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"contaOrigem\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $setup.form.contaOrigem = $event;\n    }),\n    required: \"\",\n    pattern: \"[0-9]{10}\",\n    \"class\": _normalizeClass([\"form-control\", {\n      'error': $setup.errors.contaOrigem\n    }])\n  }, null, 2 /* CLASS */), [[_vModelText, $setup.form.contaOrigem]]), $setup.errors.contaOrigem ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString($setup.errors.contaOrigem), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_4, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    \"for\": \"contaDestino\"\n  }, \"Conta de Destino:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"contaDestino\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $setup.form.contaDestino = $event;\n    }),\n    required: \"\",\n    pattern: \"[0-9]{10}\",\n    \"class\": _normalizeClass([\"form-control\", {\n      'error': $setup.errors.contaDestino\n    }])\n  }, null, 2 /* CLASS */), [[_vModelText, $setup.form.contaDestino]]), $setup.errors.contaDestino ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString($setup.errors.contaDestino), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_6, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    \"for\": \"valor\"\n  }, \"Valor da Transferência:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    id: \"valor\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n      return $setup.form.valor = $event;\n    }),\n    required: \"\",\n    min: \"0.01\",\n    step: \"0.01\",\n    \"class\": _normalizeClass([\"form-control\", {\n      'error': $setup.errors.valor\n    }])\n  }, null, 2 /* CLASS */), [[_vModelText, $setup.form.valor]]), $setup.errors.valor ? (_openBlock(), _createElementBlock(\"span\", _hoisted_7, _toDisplayString($setup.errors.valor), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_8, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    \"for\": \"dataTransferencia\"\n  }, \"Data da Transferência:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    id: \"dataTransferencia\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n      return $setup.form.dataTransferencia = $event;\n    }),\n    required: \"\",\n    min: $setup.minDate,\n    \"class\": _normalizeClass([\"form-control\", {\n      'error': $setup.errors.dataTransferencia\n    }])\n  }, null, 10 /* CLASS, PROPS */, _hoisted_9), [[_vModelText, $setup.form.dataTransferencia]]), $setup.errors.dataTransferencia ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, _toDisplayString($setup.errors.dataTransferencia), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), $setup.taxaCalculada ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createElementVNode(\"p\", null, \"Taxa Estimada: R$ \" + _toDisplayString($setup.taxaCalculada.toFixed(2)), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_12, [_cache[10] || (_cache[10] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    \"class\": \"btn-primary\"\n  }, \"Agendar\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: _cache[4] || (_cache[4] = function () {\n      return $setup.limparFormulario && $setup.limparFormulario.apply($setup, arguments);\n    }),\n    \"class\": \"btn-secondary\"\n  }, \"Limpar\")])], 32 /* NEED_HYDRATION */)]);\n}","map":{"version":3,"names":["key","_createElementBlock","_hoisted_1","_createElementVNode","onSubmit","_cache","_withModifiers","$setup","handleSubmit","apply","arguments","_hoisted_2","type","id","$event","form","contaOrigem","required","pattern","_normalizeClass","errors","_hoisted_3","_toDisplayString","_createCommentVNode","_hoisted_4","contaDestino","_hoisted_5","_hoisted_6","valor","min","step","_hoisted_7","_hoisted_8","dataTransferencia","minDate","_hoisted_9","_hoisted_10","taxaCalculada","_hoisted_11","toFixed","_hoisted_12","onClick","limparFormulario"],"sources":["C:\\Users\\willi\\OneDrive\\Documentos\\GitHub\\FE-transfer-scheduler\\src\\views\\AgendamentoTransferencia.vue"],"sourcesContent":["<template>\r\n  <div class=\"agendamento\">\r\n    <h2>Novo Agendamento de Transferência</h2>\r\n    <form @submit.prevent=\"handleSubmit\">\r\n      <div class=\"form-group\">\r\n        <label for=\"contaOrigem\">Conta de Origem:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"contaOrigem\"\r\n          v-model=\"form.contaOrigem\"\r\n          required\r\n          pattern=\"[0-9]{10}\"\r\n          class=\"form-control\"\r\n          :class=\"{ 'error': errors.contaOrigem }\"\r\n        >\r\n        <span class=\"error-message\" v-if=\"errors.contaOrigem\">{{ errors.contaOrigem }}</span>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"contaDestino\">Conta de Destino:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"contaDestino\"\r\n          v-model=\"form.contaDestino\"\r\n          required\r\n          pattern=\"[0-9]{10}\"\r\n          class=\"form-control\"\r\n          :class=\"{ 'error': errors.contaDestino }\"\r\n        >\r\n        <span class=\"error-message\" v-if=\"errors.contaDestino\">{{ errors.contaDestino }}</span>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"valor\">Valor da Transferência:</label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"valor\"\r\n          v-model=\"form.valor\"\r\n          required\r\n          min=\"0.01\"\r\n          step=\"0.01\"\r\n          class=\"form-control\"\r\n          :class=\"{ 'error': errors.valor }\"\r\n        >\r\n        <span class=\"error-message\" v-if=\"errors.valor\">{{ errors.valor }}</span>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"dataTransferencia\">Data da Transferência:</label>\r\n        <input\r\n          type=\"date\"\r\n          id=\"dataTransferencia\"\r\n          v-model=\"form.dataTransferencia\"\r\n          required\r\n          :min=\"minDate\"\r\n          class=\"form-control\"\r\n          :class=\"{ 'error': errors.dataTransferencia }\"\r\n        >\r\n        <span class=\"error-message\" v-if=\"errors.dataTransferencia\">{{ errors.dataTransferencia }}</span>\r\n      </div>\r\n\r\n      <div v-if=\"taxaCalculada\" class=\"info-box\">\r\n        <p>Taxa Estimada: R$ {{ taxaCalculada.toFixed(2) }}</p>\r\n      </div>\r\n\r\n      <div class=\"button-group\">\r\n        <button type=\"submit\" class=\"btn-primary\">Agendar</button>\r\n        <button type=\"button\" @click=\"limparFormulario\" class=\"btn-secondary\">Limpar</button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'AgendamentoTransferencia',\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const errors = ref({})\r\n\r\n    const form = ref({\r\n      contaOrigem: '',\r\n      contaDestino: '',\r\n      valor: '',\r\n      dataTransferencia: ''\r\n    })\r\n\r\n    const minDate = computed(() => {\r\n      const today = new Date()\r\n      return today.toISOString().split('T')[0]\r\n    })\r\n\r\n    const calcularTaxa = (valor, dataTransferencia) => {\r\n      const hoje = new Date()\r\n      const dataTransferenciaObj = new Date(dataTransferencia)\r\n      const diffDias = Math.floor((dataTransferenciaObj - hoje) / (1000 * 60 * 60 * 24))\r\n\r\n      if (diffDias === 0) {\r\n        return 12 + (valor * 0.025)\r\n      } else if (diffDias >= 1 && diffDias <= 10) {\r\n        return 12\r\n      } else if (diffDias >= 11 && diffDias <= 20) {\r\n        return valor * 0.082\r\n      } else if (diffDias >= 21 && diffDias <= 30) {\r\n        return valor * 0.069\r\n      } else if (diffDias >= 31 && diffDias <= 40) {\r\n        return valor * 0.047\r\n      } else if (diffDias >= 41 && diffDias <= 50) {\r\n        return valor * 0.017\r\n      }\r\n      return null\r\n    }\r\n\r\n    const taxaCalculada = computed(() => {\r\n      if (!form.value.valor || !form.value.dataTransferencia) return null\r\n      return calcularTaxa(Number(form.value.valor), form.value.dataTransferencia)\r\n    })\r\n\r\n    const validarFormulario = () => {\r\n      errors.value = {}\r\n\r\n      if (form.value.contaOrigem.length !== 10) {\r\n        errors.value.contaOrigem = 'A conta de origem deve ter 10 dígitos'\r\n      }\r\n\r\n      if (form.value.contaDestino.length !== 10) {\r\n        errors.value.contaDestino = 'A conta de destino deve ter 10 dígitos'\r\n      }\r\n\r\n      if (form.value.contaOrigem === form.value.contaDestino) {\r\n        errors.value.contaDestino = 'A conta de destino não pode ser igual à conta de origem'\r\n      }\r\n\r\n      if (form.value.valor <= 0) {\r\n        errors.value.valor = 'O valor deve ser maior que zero'\r\n      }\r\n\r\n      if (!form.value.dataTransferencia) {\r\n        errors.value.dataTransferencia = 'A data de transferência é obrigatória'\r\n      } else if (new Date(form.value.dataTransferencia) < new Date()) {\r\n        errors.value.dataTransferencia = 'A data de transferência não pode ser no passado'\r\n      }\r\n\r\n      return Object.keys(errors.value).length === 0\r\n    }\r\n\r\n    const handleSubmit = async () => {\r\n      if (!validarFormulario()) return\r\n\r\n      try {\r\n        const agendamento = {\r\n          contaOrigem: form.value.contaOrigem,\r\n          contaDestino: form.value.contaDestino,\r\n          valor: Number(form.value.valor),\r\n          dataTransferencia: form.value.dataTransferencia\r\n        }\r\n\r\n        await store.dispatch('criarAgendamento', agendamento)\r\n        alert('Transferência agendada com sucesso!')\r\n        router.push('/agendamentos')\r\n      } catch (error) {\r\n        if (error.response?.data?.message) {\r\n          alert(`Erro: ${error.response.data.message}`)\r\n        } else {\r\n          alert('Erro ao agendar transferência')\r\n        }\r\n      }\r\n    }\r\n\r\n    const limparFormulario = () => {\r\n      form.value = {\r\n        contaOrigem: '',\r\n        contaDestino: '',\r\n        valor: '',\r\n        dataTransferencia: ''\r\n      }\r\n      errors.value = {}\r\n    }\r\n\r\n    return {\r\n      form,\r\n      errors,\r\n      minDate,\r\n      taxaCalculada,\r\n      handleSubmit,\r\n      limparFormulario\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.agendamento {\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 15px;\r\n  text-align: left;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.form-control {\r\n  width: 100%;\r\n  padding: 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n}\r\n\r\n.form-control.error {\r\n  border-color: #ff4444;\r\n}\r\n\r\n.error-message {\r\n  color: #ff4444;\r\n  font-size: 0.9em;\r\n  margin-top: 5px;\r\n  display: block;\r\n}\r\n\r\n.button-group {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.btn-primary, .btn-secondary {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  flex: 1;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: #42b983;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: #666;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background-color: #3aa876;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: #555;\r\n}\r\n\r\n.info-box {\r\n  background-color: #f8f9fa;\r\n  padding: 15px;\r\n  border-radius: 4px;\r\n  margin: 20px 0;\r\n  text-align: left;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}