{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/willi/OneDrive/Documentos/GitHub/FE-transfer-scheduler/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/willi/OneDrive/Documentos/GitHub/FE-transfer-scheduler/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport { computed, onMounted, ref } from 'vue';\nimport { useStore } from 'vuex';\nimport Modal from '@/components/Modal.vue';\nexport default {\n  name: 'ListagemAgendamentos',\n  components: {\n    Modal: Modal\n  },\n  setup: function setup() {\n    var store = useStore();\n    var loading = computed(function () {\n      return store.state.loading;\n    });\n    var agendamentos = computed(function () {\n      return store.state.agendamentos;\n    });\n    var currentPage = computed(function () {\n      return store.state.pagination.currentPage;\n    });\n    var totalPages = computed(function () {\n      return store.state.pagination.totalPages;\n    });\n    var showConfirmModal = ref(false);\n    var showSuccessModal = ref(false);\n    var showErrorModal = ref(false);\n    var errorMessage = ref('');\n    var agendamentoParaExcluir = ref(null);\n    var formatarData = function formatarData(data) {\n      return new Date(data).toLocaleString('pt-BR', {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    };\n    var carregarAgendamentos = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var page,\n          _args = arguments;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              page = _args.length > 0 && _args[0] !== undefined ? _args[0] : 0;\n              _context.prev = 1;\n              _context.next = 4;\n              return store.dispatch('fetchAgendamentos', {\n                page: page,\n                size: 10\n              });\n            case 4:\n              _context.next = 11;\n              break;\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](1);\n              console.error('Erro ao carregar agendamentos:', _context.t0);\n              errorMessage.value = 'Erro ao carregar agendamentos';\n              showErrorModal.value = true;\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[1, 6]]);\n      }));\n      return function carregarAgendamentos() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var mudarPagina = function mudarPagina(page) {\n      carregarAgendamentos(page);\n    };\n    var confirmarExclusao = function confirmarExclusao(id) {\n      agendamentoParaExcluir.value = id;\n      showConfirmModal.value = true;\n    };\n    var handleExclusaoConfirmada = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return store.dispatch('excluirAgendamento', agendamentoParaExcluir.value);\n            case 3:\n              _context2.next = 5;\n              return carregarAgendamentos(currentPage.value);\n            case 5:\n              showSuccessModal.value = true;\n              _context2.next = 13;\n              break;\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error('Erro ao excluir agendamento:', _context2.t0);\n              errorMessage.value = 'Erro ao excluir agendamento';\n              showErrorModal.value = true;\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 8]]);\n      }));\n      return function handleExclusaoConfirmada() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    onMounted(function () {\n      carregarAgendamentos();\n    });\n    return {\n      loading: loading,\n      agendamentos: agendamentos,\n      currentPage: currentPage,\n      totalPages: totalPages,\n      formatarData: formatarData,\n      mudarPagina: mudarPagina,\n      confirmarExclusao: confirmarExclusao,\n      showConfirmModal: showConfirmModal,\n      showSuccessModal: showSuccessModal,\n      showErrorModal: showErrorModal,\n      errorMessage: errorMessage\n    };\n  }\n};","map":{"version":3,"names":["computed","onMounted","ref","useStore","Modal","name","components","setup","store","loading","state","agendamentos","currentPage","pagination","totalPages","showConfirmModal","showSuccessModal","showErrorModal","errorMessage","agendamentoParaExcluir","formatarData","data","Date","toLocaleString","day","month","year","hour","minute","carregarAgendamentos","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","page","_args","arguments","wrap","_callee$","_context","prev","next","length","undefined","dispatch","size","t0","console","error","value","stop","apply","mudarPagina","confirmarExclusao","id","handleExclusaoConfirmada","_ref2","_callee2","_callee2$","_context2"],"sources":["C:\\Users\\willi\\OneDrive\\Documentos\\GitHub\\FE-transfer-scheduler\\src\\views\\ListagemAgendamentos.vue"],"sourcesContent":["<template>\r\n  <div class=\"listagem\">\r\n    <h2>Agendamentos de Transferência</h2>\r\n    \r\n    <div class=\"actions\">\r\n      <router-link to=\"/novo-agendamento\" class=\"btn-primary\">Novo Agendamento</router-link>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"loading\">\r\n      Carregando...\r\n    </div>\r\n\r\n    <div v-else-if=\"agendamentos.length === 0\" class=\"empty-state\">\r\n      Nenhum agendamento encontrado.\r\n    </div>\r\n\r\n    <div v-else>\r\n      <table class=\"agendamentos-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Conta Origem</th>\r\n            <th>Conta Destino</th>\r\n            <th>Valor</th>\r\n            <th>Taxa</th>\r\n            <th>Data Agendamento</th>\r\n            <th>Data Transferência</th>\r\n            <th>Ações</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"agendamento in agendamentos\" :key=\"agendamento.id\">\r\n            <td>{{ agendamento.id }}</td>\r\n            <td>{{ agendamento.contaOrigem }}</td>\r\n            <td>{{ agendamento.contaDestino }}</td>\r\n            <td>R$ {{ agendamento.valor.toFixed(2) }}</td>\r\n            <td>R$ {{ agendamento.taxa.toFixed(2) }}</td>\r\n            <td>{{ formatarData(agendamento.dataAgendamento) }}</td>\r\n            <td>{{ formatarData(agendamento.dataTransferencia) }}</td>\r\n            <td>\r\n              <button\r\n                @click=\"confirmarExclusao(agendamento.id)\"\r\n                class=\"btn-danger\"\r\n              >\r\n                Excluir\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <div v-if=\"totalPages > 1\" class=\"pagination\">\r\n        <button\r\n          :disabled=\"currentPage === 0\"\r\n          @click=\"mudarPagina(currentPage - 1)\"\r\n          class=\"btn-page\"\r\n        >\r\n          Anterior\r\n        </button>\r\n        <span class=\"page-info\">\r\n          Página {{ currentPage + 1 }} de {{ totalPages }}\r\n        </span>\r\n        <button\r\n          :disabled=\"currentPage === totalPages - 1\"\r\n          @click=\"mudarPagina(currentPage + 1)\"\r\n          class=\"btn-page\"\r\n        >\r\n          Próxima\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <Modal\r\n      v-model=\"showConfirmModal\"\r\n      title=\"Confirmar Exclusão\"\r\n      message=\"Tem certeza que deseja excluir este agendamento?\"\r\n      type=\"confirm\"\r\n      confirmText=\"Excluir\"\r\n      @confirm=\"handleExclusaoConfirmada\"\r\n    />\r\n\r\n    <Modal\r\n      v-model=\"showSuccessModal\"\r\n      title=\"Sucesso\"\r\n      message=\"Agendamento excluído com sucesso!\"\r\n      type=\"alert\"\r\n    />\r\n\r\n    <Modal\r\n      v-model=\"showErrorModal\"\r\n      title=\"Erro\"\r\n      :message=\"errorMessage\"\r\n      type=\"alert\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport Modal from '@/components/Modal.vue'\r\n\r\nexport default {\r\n  name: 'ListagemAgendamentos',\r\n  components: {\r\n    Modal\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const loading = computed(() => store.state.loading)\r\n    const agendamentos = computed(() => store.state.agendamentos)\r\n    const currentPage = computed(() => store.state.pagination.currentPage)\r\n    const totalPages = computed(() => store.state.pagination.totalPages)\r\n\r\n    const showConfirmModal = ref(false)\r\n    const showSuccessModal = ref(false)\r\n    const showErrorModal = ref(false)\r\n    const errorMessage = ref('')\r\n    const agendamentoParaExcluir = ref(null)\r\n\r\n    const formatarData = (data) => {\r\n      return new Date(data).toLocaleString('pt-BR', {\r\n        day: '2-digit',\r\n        month: '2-digit',\r\n        year: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      })\r\n    }\r\n\r\n    const carregarAgendamentos = async (page = 0) => {\r\n      try {\r\n        await store.dispatch('fetchAgendamentos', { page, size: 10 })\r\n      } catch (error) {\r\n        console.error('Erro ao carregar agendamentos:', error)\r\n        errorMessage.value = 'Erro ao carregar agendamentos'\r\n        showErrorModal.value = true\r\n      }\r\n    }\r\n\r\n    const mudarPagina = (page) => {\r\n      carregarAgendamentos(page)\r\n    }\r\n\r\n    const confirmarExclusao = (id) => {\r\n      agendamentoParaExcluir.value = id\r\n      showConfirmModal.value = true\r\n    }\r\n\r\n    const handleExclusaoConfirmada = async () => {\r\n      try {\r\n        await store.dispatch('excluirAgendamento', agendamentoParaExcluir.value)\r\n        await carregarAgendamentos(currentPage.value)\r\n        showSuccessModal.value = true\r\n      } catch (error) {\r\n        console.error('Erro ao excluir agendamento:', error)\r\n        errorMessage.value = 'Erro ao excluir agendamento'\r\n        showErrorModal.value = true\r\n      }\r\n    }\r\n\r\n    onMounted(() => {\r\n      carregarAgendamentos()\r\n    })\r\n\r\n    return {\r\n      loading,\r\n      agendamentos,\r\n      currentPage,\r\n      totalPages,\r\n      formatarData,\r\n      mudarPagina,\r\n      confirmarExclusao,\r\n      showConfirmModal,\r\n      showSuccessModal,\r\n      showErrorModal,\r\n      errorMessage\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.listagem {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.actions {\r\n  margin-bottom: 20px;\r\n  text-align: right;\r\n}\r\n\r\n.agendamentos-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.agendamentos-table th,\r\n.agendamentos-table td {\r\n  padding: 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.agendamentos-table th {\r\n  background-color: #f8f9fa;\r\n  font-weight: bold;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: #42b983;\r\n  color: white;\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  display: inline-block;\r\n}\r\n\r\n.btn-danger {\r\n  background-color: #dc3545;\r\n  color: white;\r\n  padding: 6px 12px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.btn-page {\r\n  background-color: #f8f9fa;\r\n  border: 1px solid #ddd;\r\n  padding: 8px 16px;\r\n  margin: 0 5px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.btn-page:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.page-info {\r\n  margin: 0 10px;\r\n}\r\n\r\n.loading {\r\n  text-align: center;\r\n  padding: 20px;\r\n  color: #666;\r\n}\r\n\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 40px;\r\n  color: #666;\r\n  background-color: #f8f9fa;\r\n  border-radius: 4px;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}